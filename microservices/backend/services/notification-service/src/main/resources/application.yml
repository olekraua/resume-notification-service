server:
  port: 8085
  forward-headers-strategy: framework

spring:
  application:
    name: resume-notification-service
  mail:
    host: ${SPRING_MAIL_HOST:}
    port: ${SPRING_MAIL_PORT:}
    username: ${SMTP_USER:}
    password: ${SMTP_PASS}
  kafka:
    bootstrap-servers: ${KAFKA_BOOTSTRAP_SERVERS:localhost:9092}
    consumer:
      auto-offset-reset: earliest
      key-deserializer: org.apache.kafka.common.serialization.StringDeserializer
      value-deserializer: org.apache.kafka.common.serialization.StringDeserializer
    producer:
      key-serializer: org.apache.kafka.common.serialization.StringSerializer
      value-serializer: org.apache.kafka.common.serialization.StringSerializer
      acks: all
  autoconfigure:
    exclude:
      - org.springframework.boot.autoconfigure.jdbc.DataSourceAutoConfiguration
      - org.springframework.boot.autoconfigure.orm.jpa.HibernateJpaAutoConfiguration
      - org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration
      - org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration
      - org.springframework.boot.actuate.autoconfigure.security.servlet.ManagementWebSecurityAutoConfiguration

app:
  platform:
    middleware:
      timeout:
        enabled: ${APP_PLATFORM_TIMEOUT_ENABLED:true}
      retry:
        enabled: ${APP_PLATFORM_RETRY_ENABLED:true}
      circuit:
        enabled: ${APP_PLATFORM_CIRCUIT_ENABLED:true}
      idempotency:
        enabled: ${APP_PLATFORM_IDEMPOTENCY_ENABLED:true}
      telemetry:
        enabled: ${APP_PLATFORM_TELEMETRY_ENABLED:true}
        request-id-header: ${APP_PLATFORM_REQUEST_ID_HEADER:X-Request-Id}
        trace-id-header: ${APP_PLATFORM_TRACE_ID_HEADER:X-Trace-Id}
  notification:
    messaging:
      enabled: true
      consumer-group: ${APP_NOTIFICATION_CONSUMER_GROUP:resume-notification-mail}
      kafka:
        topic-restore-access-mail: ${APP_NOTIFICATION_TOPIC_RESTORE_ACCESS_MAIL:resume.auth.restore-access-mail}
      retry:
        max-attempts: ${NOTIFICATION_RETRY_MAX:5}
        initial-delay-ms: ${NOTIFICATION_RETRY_INITIAL_DELAY_MS:1000}
        max-delay-ms: ${NOTIFICATION_RETRY_DELAY_MS:30000}
        multiplier: ${NOTIFICATION_RETRY_MULTIPLIER:2.0}
      idempotency:
        enabled: ${APP_NOTIFICATION_IDEMPOTENCY_ENABLED:true}
        max-size: ${APP_NOTIFICATION_IDEMPOTENCY_CACHE_MAX_SIZE:200000}
        ttl: ${APP_NOTIFICATION_IDEMPOTENCY_CACHE_TTL:PT24H}
